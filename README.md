# Yomiage Web TTS（日本語特化）

貼り付けた日本語テキストを、ブラウザ組み込みの Web Speech API（SpeechSynthesis）のみで読み上げるシングルページ Web アプリです。データは端末外へ送信されず、ファイル保存も行いません。

## 特徴
- **Shadcn/UI + Tailwind によるモバイルフレンドリーな UI**  
  ボタン / スライダー / タブを再構成し、進行バーとシーク操作で現在位置を把握しやすくしました。
  Google 日本語 voice を基本とし、用途に合わせた表示メッセージを追加しています。
  速度と音量スライダーは再生中でも即時に反映されます。
- **React + Vite 構成**  
  TypeScript 化とモジュール分割（分割器・再生キュー・音声検出・UI）を維持しつつ、ホットリロード可能な開発環境を提供します。
- **日本語向けテキスト分割の最適化**  
  句読点や箇条書きを考慮しつつ短すぎるチャンクを自動連結し、滑らかな読み上げを実現します。
- **速度調整と自動ピッチ補正**  
  速度変更は再生中でも続きから反映し、高速時はピッチを自動調整して聞き取りやすさを維持します。
- **ハイライトと Markdown プレビュー**  
  再生中のチャンクを自動スクロールで追従し、Markdown プレビューとの切り替えも可能です。
- **完全ローカル実行**  
  読み上げ設定（音声・速度）はブラウザ内で完結し、外部 API への送信は行いません。

## 技術スタック
- React 18 / TypeScript / Vite 5
- Tailwind CSS + Shadcn/UI コンポーネント
- Radix UI（Select / Tabs / Slider など）
- Web Speech API（SpeechSynthesis）

## 動作環境
- Node.js 18 以上（開発・ビルド時）
- 対応ブラウザ：Chrome / Edge 最新版、Safari 16+（iOS 含む）

## セットアップ
```bash
npm install
```

### 開発サーバー
```bash
npm run dev
```
`http://localhost:5173/` をブラウザで開いてください。ホットリロードに対応しています。

### 本番ビルド
```bash
npm run build
```
`dist/` に静的ファイルが生成されます。確認は次のコマンドで行えます。
```bash
npm run preview
```

## 使い方
1. 画面右側のテキストエリアへ長文を貼り付けます（保存はされません）。
2. Google 日本語 voice が自動選択されます（存在しない場合は利用可能な日本語 voice へ自動で切り替えます）。
3. 速度スライダーで話速を調整します。再生中に変えても続きから反映され、高速時はピッチが自動補正されます。
4. 音量スライダーで音量を調整します（再生中でも反映されます）。
5. 進行バーをドラッグすると任意の位置へシークできます。
6. タブで「テキスト」「Markdown」を切り替えてプレビューを確認できます。
7. キーボードショートカット  \n   - `Space` : 再生 / 一時停止  \n   - `[` / `]` : 前後チャンクへ移動  \n   - `+` / `-` : 速度を ±0.05 ずつ変更

## 既知の制約
- ブラウザや OS に日本語 voice が存在しない場合は警告を表示し、再生できないことがあります。
- Google 日本語 voice が使えない環境では、ブラウザに搭載されている別の日本語 voice を利用します（品質は環境依存）。
- iOS / Safari ではオーディオ再生開始時にユーザー操作が必須です。
- バックグラウンド遷移時はブラウザ仕様により自動的に一時停止する場合があります。

## デプロイ
- GitHub Pages にデプロイする場合は `npm run build:pages` を実行すると `docs/` に静的ファイルが展開されます。
- リポジトリ設定で **Pages → Deploy from a branch → main /docs** を指定してください。

## ライセンス
MIT License  
Shadcn/UI コンポーネントは MIT ライセンスのテンプレートを基にしています。
